<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
    <link rel="icon" href="/images/favicon.ico">
  
  <title>Lemon</title>
  <link rel="stylesheet" href="/css/styles.css">
  <script src="/lib/jquery.js"></script>
  <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css">
  <script src="/js/common.js"></script>
  <script src="/lib/bootstrap/js/bootstrap.js"></script>
  <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
</head>

  <body>
    <header class="header">
  <div class="color-bar">
    <ul>
      <li class="bar1"></li>
      <li class="bar2"></li>
      <li class="bar3"></li>
      <li class="bar4"></li>
      <li class="bar5"></li>
      <li class="bar6"></li>
    </ul>
  </div>
  <div class="header-wrapper">
    <div class="blog-title">
      
        <img class="logo" src="/images/logo.png" alt="logo">
      
      <a href="/" class="title">Lemon</a>
    </div>
    <nav class="navbar navbar-menu">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" id="nav-btn" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
      </div>
        <ul class="menu menu-pc">
          
            <li class="menu-item">
              <a href="/" class="menu-item-link"><i class="fa fa-home"></i><span>首页</span></a>
            </li>
          
            <li class="menu-item">
              <a href="/tags/" class="menu-item-link"><i class="fa fa-tags"></i><span>Tags</span></a>
            </li>
          
            <li class="menu-item">
              <a href="/archives/" class="menu-item-link"><i class="fa fa-file"></i><span>归档</span></a>
            </li>
          
            <li class="menu-item">
              <a href="https://github.com/littleee/" class="menu-item-link"><i class="fa fa-github"></i><span>github</span></a>
            </li>
          
        </ul>
    </nav>
  </div>
</header>
<div class="collapse nav-collapse" style="position:fixed;top:59px;" id="bs-example-navbar-collapse-1">
  <ul class="menu menu-mobile" style="list-style:none">
    
      <li class="menu-item">
        <a href="/" class="menu-item-link"><i class="fa fa-home"></i><span>首页</span></a>
      </li>
    
      <li class="menu-item">
        <a href="/tags/" class="menu-item-link"><i class="fa fa-tags"></i><span>Tags</span></a>
      </li>
    
      <li class="menu-item">
        <a href="/archives/" class="menu-item-link"><i class="fa fa-file"></i><span>归档</span></a>
      </li>
    
      <li class="menu-item">
        <a href="https://github.com/littleee/" class="menu-item-link"><i class="fa fa-github"></i><span>github</span></a>
      </li>
    
  </ul>
</div>

    <main class="main">
      <div class="content">
        

<section class="banner">
  <div class="headintro">
    <p class="title">code eat sleep loop</p>
    <p class="subtitle">三流代码 &amp; 一流Bug</p>
  </div>
</section>



<section class="posts">
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-12-06</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/12/06/h5/">
            
              面试题总结之 h5
            
          </a>
          
        
        <div class="post-tags">
          
        </div>
      </div>
      <div class="post-content">

        

        
        <h4 id="1-HTML5是什么？有哪些新特性？有哪些新增标签？如何让低版本的-IE-支持-HTML5新标签？"><a href="#1-HTML5是什么？有哪些新特性？有哪些新增标签？如何让低版本的-IE-支持-HTML5新标签？" class="headerlink" title="1.HTML5是什么？有哪些新特性？有哪些新增标签？如何让低版本的 IE 支持 HTML5新标签？"></a>1.HTML5是什么？有哪些新特性？有哪些新增标签？如何让低版本的 IE 支持 HTML5新标签？</h4><ul>
<li><p>新特性<br> 1.语意特性,添加<code>&lt;header&gt;&lt;header/&gt; &lt;nav&gt;&lt;nav&gt;</code>等标签<br> 2.多媒体， 用于媒介回放的 video 和 audio 元素<br> 3.图像效果，用于绘画的 canvas 元素，svg元素等<br> 4.离线 &amp; 存储,对本地离线存储的更好的支持,localStore,Cookies等<br> 5.设备兼容特性 ，HTML5提供了前所未有的数据与应用接入开放接口。使外部应用可以直接与浏览器内部的数据直接相连<br> 6.连接特性，更有效的连接工作效率，使得基于页面的实时聊天，更快速的网页游戏体验，更优化的在线交流得到了实现。HTML5拥有更有效的服务器推送技术，Server-Sent Event和WebSockets就是其中的两个特性，这两个特性能够帮助我们实现服务器将数据“推送”到客户端的功能<br> 7.性能与集成特性，HTML5会通过XMLHttpRequest2等技术，帮助您的Web应用和网站在多样化的环境中更快速的工作</p>
</li>
<li><p>新增标签<br> 1.多媒体：<code>&lt;audio&gt;&lt;/audio&gt;, &lt;video&gt;&lt;video&gt;,&lt;source&gt;&lt;/source&gt;, &lt;embed&gt;&lt;/embed&gt;, &lt;track&gt;&lt;/track&gt;</code><br> 2.新表单元素：<code>&lt;datalist&gt; ,&lt;output&gt; , &lt;keygen&gt;</code><br> 3.新文档节段和纲要:<code>&lt;header&gt;页面头部、&lt;section&gt;章节、&lt;aside&gt;边栏、&lt;article&gt;文档内容、&lt;footer&gt;页面底部、&lt;section&gt;章节、&lt;aside&gt;边栏、&lt;article&gt;文档内容、&lt;footer&gt;页面底部</code>等</p>
</li>
<li><p>使用html5shiv可以解决ie低版本不兼容的问题，只需要在head中加上,当版本低于IE9时，浏览器会加载html5.js脚本，使得支持html5的新功能，也可以将脚本文件下载到本地</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;!--[<span class="keyword">if</span> lt IE <span class="number">9</span>]&gt;</span><br><span class="line">  &lt;script src=<span class="string">'http://apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js'</span>&gt;</span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">  &lt;![endif]--&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2-input-有哪些新增类型？"><a href="#2-input-有哪些新增类型？" class="headerlink" title="2.input 有哪些新增类型？"></a>2.input 有哪些新增类型？</h4><ul>
<li>color,选择颜色</li>
<li>date 选择日期</li>
<li>email 用于检测输入的是否为email格式的地址</li>
<li>month 选择月份</li>
<li>number  用于应该包含数值的输入域，可以设定对输入值的限定</li>
<li>range 用于定义一个滑动条，表示范围</li>
<li>search 用于搜索，比如站点搜索或 Google 搜索</li>
<li>tel 输入电话号码<br> -time 选择时间</li>
<li>url 输入网址</li>
<li>week 选择周和年</li>
</ul>
<h4 id="3-WebSocket"><a href="#3-WebSocket" class="headerlink" title="3.WebSocket"></a>3.WebSocket</h4><p>​    WebSocket 是HTML5提出的协议，是一个<strong>持久化</strong>协议；</p>
<p>​    服务器可以主动推送信息给客户端；</p>
<p>​    只需要一次HTTP请求，与服务器建立持久化连接，服务器会一直知道你的信息，直到你关闭请求。</p>
<p>​    HTTP特性：无持久化链接      被动性（服务器不能主动联系客户端，只能客户端发起）</p>
<ul>
<li><p><strong>ajax轮询</strong></p>
</li>
<li><p><strong>long poll</strong></p>
<p>采用阻塞模式，也就是说，客户端发起连接之后，如果没消息，就一直不返回Response给客户端。直到有消息才返回，返回完之后，客户端再次建立连接，周而复始。</p>
<p>缺点：需要有很高的并发，也就是同时接待客户的能力。</p>
<p>浏览器每隔几秒就发送一次请求，询问服务器是否有新信息；</p>
<p>缺点：需要服务器有很快的处理速度和资源。</p>
</li>
</ul>

        
      </div>
    </article>
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-11-02</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/11/02/Countdown/">
            
              基于jQuery实现的页面秒杀工具
            
          </a>
          
        
        <div class="post-tags">
          
        </div>
      </div>
      <div class="post-content">

        

        
        <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style media="screen"&gt;</span><br><span class="line">    <span class="selector-class">.num</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">3px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">3px</span>;</span><br><span class="line">        <span class="attribute">color</span>: white;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"num fl"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"num fl"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"colon fl"</span>&gt;</span>天<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"num fl"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"num fl"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"colon fl"</span>&gt;</span>时<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"num fl"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"num fl"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"colon fl"</span>&gt;</span>分<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"num fl"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"num fl"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"colon fl"</span>&gt;</span>秒<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">      <span class="comment">//1. 指定倒计时的到期时间  2018:11:11:00:00:00     月份从0开始</span></span><br><span class="line">      <span class="keyword">var</span> to = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2. 定义定时器回调函数</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">antitime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        <span class="keyword">var</span> deltaTime = to - now;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果超时了，就停止倒计时</span></span><br><span class="line">        <span class="keyword">if</span> (deltaTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="built_in">window</span>.clearInterval(timer);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> day = <span class="built_in">parseInt</span>(deltaTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> *<span class="number">24</span>));</span><br><span class="line">        day = day &lt; <span class="number">10</span> ? <span class="string">"0"</span> + day : day;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> hou = <span class="built_in">parseInt</span>(deltaTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>) % <span class="number">24</span>);</span><br><span class="line">        hou = hou &lt; <span class="number">10</span> ? <span class="string">"0"</span> + hou : hou;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> min = <span class="built_in">parseInt</span>(deltaTime / (<span class="number">1000</span> * <span class="number">60</span>) % <span class="number">60</span>)</span><br><span class="line">        min = min &lt; <span class="number">10</span> ? <span class="string">"0"</span> + min : min;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> sec = <span class="built_in">parseInt</span>(deltaTime / <span class="number">1000</span> % <span class="number">60</span>)</span><br><span class="line">        sec = sec &lt; <span class="number">10</span> ? <span class="string">"0"</span> + sec : sec;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> timeStr = <span class="string">`<span class="subst">$&#123;day&#125;</span><span class="subst">$&#123;hou&#125;</span><span class="subst">$&#123;min&#125;</span><span class="subst">$&#123;sec&#125;</span>`</span></span><br><span class="line"></span><br><span class="line">        $(<span class="string">".num"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index, span</span>) </span>&#123;</span><br><span class="line">          $(span).html(timeStr.substring(index, index + <span class="number">1</span>));</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> timer = setInterval(antitime, <span class="number">1000</span>);</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

        
      </div>
    </article>
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-11-01</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/11/01/Token/">
            
              Token
            
          </a>
          
        
        <div class="post-tags">
          
            <p>基于 Token 的身份验证方法</p>
          
        </div>
      </div>
      <div class="post-content">

        

        
        <h1 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h1><p><strong>基于 Token 的身份验证方法</strong></p>
<p>使用基于 Token 的身份验证方法，在服务端不需要存储用户的登录记录。大概的流程是这样的：</p>
<ol>
<li>客户端使用 用户名 跟 密码 请求登录</li>
<li>服务端收到请求，去验证 用户名 与 密码</li>
<li>验证成功后，服务端会签发一个 Token，再把这个 Token 发送给客户端</li>
<li>客户端收到 Token 以后可以把它存储起来，比如放在 Cookie 里或者 Local Storage 里</li>
<li>客户端每次向服务端请求资源的时候需要带着服务端签发的 Token</li>
<li>服务端收到请求，然后去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据</li>
</ol>
<p><code>login.vue</code></p>
<p>如果请求成功，将服务端返回的 Token 储存起来</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> token = data.data.token   <span class="comment">//根据返回数据拿到token值，并不一定全这样写</span></span><br><span class="line">  sessionStorage.setItem(<span class="string">'token'</span>, token)   <span class="comment">//储存token，根据需要不一定全储存sessionStorage里</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>home.vue</code></p>
<p>在每个页面渲染之前验证是否登录, 如果token存在，则渲染页面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate () &#123;</span><br><span class="line">  <span class="keyword">const</span> token = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">  <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">    <span class="keyword">this</span>.$router.push(<span class="string">'/login'</span>)     <span class="comment">// 如果 token 不存在，返回登录页面  </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>home.vue</code></p>
<p>对于退出功能，只需要清除 Token 即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">handleSignout()&#123;</span><br><span class="line">  sessionStorage.clear()</span><br><span class="line">  <span class="keyword">this</span>.$router.push(<span class="string">'/login'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
      </div>
    </article>
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-10-21</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/10/21/Promise/">
            
              Promise
            
          </a>
          
        
        <div class="post-tags">
          
        </div>
      </div>
      <div class="post-content">

        

        
        <h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><p>Promise  解决问题—回调地狱（异步操作层层嵌套）</p>
<ul>
<li><p>是一个构造函数</p>
</li>
<li><p>参数类型是函数</p>
</li>
<li><p>有两个参数(resolve, reject)，参数类型都是函数</p>
</li>
<li><p>如果异步失败，调用 reject()，如果异步操作成功，调用resolve()</p>
</li>
<li><p>参数是一个容器</p>
<p>​</p>
</li>
</ul>
<ul>
<li><p>then()方法支持链式语法，</p>
<pre><code>有两个参数，类型都是函数
如果异步失败，调用参数2，如果异步操作成功，调用参数1
</code></pre><p>   ​</p>
</li>
</ul>
<ul>
<li>异步编程<ul>
<li>Promise</li>
<li>async和await</li>
<li>回调函数</li>
</ul>
</li>
</ul>
<p>代码： <code>Promise.js</code> 读取  <code>datas</code> 文件夹下的 <code>a.txt</code>  <code>b.txt</code>  <code>c.txt</code> 文件内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./datas/a.txt'</span>, <span class="string">'utf8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject();</span><br><span class="line">    &#125;</span><br><span class="line">    resolve(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./datas/b.txt'</span>, <span class="string">'utf8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject();</span><br><span class="line">    &#125;</span><br><span class="line">    resolve(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./datas/c.txt'</span>, <span class="string">'utf8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject();</span><br><span class="line">    &#125;</span><br><span class="line">    resolve(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p1.then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">      <span class="keyword">return</span> p2;               <span class="comment">// 返回Promise对象</span></span><br><span class="line">    &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">      <span class="keyword">return</span> p3;              <span class="comment">// 返回Promise对象</span></span><br><span class="line">    &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>Terminal（终端）输入<code>node Promise.js</code> ，运行文件，得到读取的文件内容。</p>

        
      </div>
    </article>
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-10-18</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/10/18/Debounce-And-Throttle/Debounce-And-Throttle/">
            
              函数防抖与函数节流
            
          </a>
          
        
        <div class="post-tags">
          
        </div>
      </div>
      <div class="post-content">

        

        
        <p>###函数防抖  debounce</p>
<p>场景：淘宝首页，侧边栏快速划过不显示内容，即从 【女装】快速无间隙滑动到【鲜花】，两模块中间的内容不显示。停到某一个侧边栏才显示侧边栏内容。</p>
<p><img src="/Users/renyan/Desktop/lianxi/函数节流与函数防抖/taobao.png" alt=""></p>
<p>以 页面元素滚动监听 为例：</p>
<p>html 部分<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"head"</span>&gt;</span>顶部导航栏<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>css 部分<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10000px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#aecabd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.head</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#aacdef</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>js 部分<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector(<span class="string">'.box'</span>);</span><br><span class="line"><span class="keyword">var</span> head = <span class="built_in">document</span>.querySelector(<span class="string">'.head'</span>);</span><br><span class="line"><span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  flag = <span class="literal">false</span>;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.scrollY &gt;= <span class="number">200</span>) &#123;</span><br><span class="line">      head.style.display = <span class="string">'block'</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      head.style.display = <span class="string">'none'</span></span><br><span class="line">    &#125;</span><br><span class="line">    flag = <span class="literal">true</span>;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>分析：</p>
<blockquote>
<ol>
<li><p>flag = true,  不会进 if</p>
</li>
<li><p>flag = false,  进 if 直接 return</p>
<ul>
<li><p>进入 false return</p>
</li>
<li><p>进入 false return</p>
<ul>
<li><p>进入 false return</p>
</li>
<li><p>…… 循环，直到不再出发页面滚动事件（即 鼠标 或 键盘 不在动）</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>停止滚动 定时器开始计时 1000ms 以后 flag = true</p>
</li>
<li><p>flag = true, 循环 1， 2， 3</p>
</li>
</ol>
</blockquote>
<h3 id="函数节流-开关-throttle"><a href="#函数节流-开关-throttle" class="headerlink" title="函数节流 (开关)  throttle"></a>函数节流 (开关)  throttle</h3><p>html 和 css 部分 同 函数防抖</p>
<p>js 部分<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector(<span class="string">'.box'</span>);</span><br><span class="line"><span class="keyword">var</span> head = <span class="built_in">document</span>.querySelector(<span class="string">'.head'</span>);</span><br><span class="line"><span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">    flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  flag = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.scrollY &gt;= <span class="number">200</span>) &#123;</span><br><span class="line">    head.style.display = <span class="string">'block'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    head.style.display = <span class="string">'none'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>分析：</p>
<blockquote>
<ol>
<li>第一次：<ul>
<li>flag = true,  不会进 if</li>
<li>flag = false,  执行后续代码</li>
</ul>
</li>
<li>第二次：<ul>
<li>flag = false,  进 if</li>
<li>flag = true,  return 不执行后续代码</li>
</ul>
</li>
<li>第三次：<ul>
<li>同第一次</li>
</ul>
</li>
</ol>
</blockquote>

        
      </div>
    </article>
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-10-12</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/10/12/Error/">
            
              Maximum call stack size exceeded at String.split
            
          </a>
          
        
        <div class="post-tags">
          
        </div>
      </div>
      <div class="post-content">

        

        
        <h1 id="Maximum-call-stack-size-exceeded-at-String-split"><a href="#Maximum-call-stack-size-exceeded-at-String-split" class="headerlink" title="Maximum call stack size exceeded at String.split"></a>Maximum call stack size exceeded at String.split</h1><h2 id="Uncaught-RangeError"><a href="#Uncaught-RangeError" class="headerlink" title="Uncaught RangeError"></a>Uncaught RangeError</h2><h3 id="题目：统计-1-到-400亿-之间的自然数中含有多少个1？"><a href="#题目：统计-1-到-400亿-之间的自然数中含有多少个1？" class="headerlink" title="题目：统计 1 到 400亿 之间的自然数中含有多少个1？"></a>题目：统计 1 到 400亿 之间的自然数中含有多少个1？</h3><p>比如1-21中，有1、10、11、12、13、14、15、16、17、18、19、20、21这么多自然数有13个1</p>
<h4 id="代码如下：（错误代码）"><a href="#代码如下：（错误代码）" class="headerlink" title="代码如下：（错误代码）"></a>代码如下：（错误代码）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getNum = <span class="function"><span class="keyword">function</span>(<span class="params">maxNum</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = num.toString();</span><br><span class="line">  <span class="keyword">var</span> arr = str.split(<span class="string">''</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] == <span class="number">1</span>) &#123;</span><br><span class="line">      count++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  num++;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (num &lt;= maxNum) &#123;</span><br><span class="line">    getNum(maxNum);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getNum(<span class="number">22222</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(count);</span><br></pre></td></tr></table></figure>
<p>上述代码在 参数为小数字的时候正常执行， 当参数数字过大，就会报错：Maximum call stack size exceeded at String.split</p>
<p>未解决？</p>

        
      </div>
    </article>
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-10-11</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/10/11/遍历对象的方法/">
            
              遍历对象的方法
            
          </a>
          
        
        <div class="post-tags">
          
        </div>
      </div>
      <div class="post-content">

        

        
        <h1 id="遍历对象的方法"><a href="#遍历对象的方法" class="headerlink" title="遍历对象的方法"></a>遍历对象的方法</h1><h5 id="1-for-…-in-语句"><a href="#1-for-…-in-语句" class="headerlink" title="1. for … in 语句"></a>1. for … in 语句</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (let variable in object)  &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"key:"</span> + i + <span class="string">", value:"</span> + obj[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>数组Array的遍历，i则为数字</p>

        
      </div>
    </article>
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-09-28</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/09/28/fetch/">
            
              fetch
            
          </a>
          
        
        <div class="post-tags">
          
        </div>
      </div>
      <div class="post-content">

        

        
        <h1 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h1><p>fetch使用了Promise<br>Promise 对象代表一个异步操作,有三种状态:Pending(进行中) Resolved(已完成) Rejected(已失效)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法:</span><br><span class="line"> fetch(参数)</span><br><span class="line"> .then(完成的回调函数)</span><br><span class="line"> .catch(失败的回调函数)</span><br></pre></td></tr></table></figure>
<h3 id="get-请求"><a href="#get-请求" class="headerlink" title="get 请求"></a>get 请求</h3><p>  默认get请求<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fetch(url?key1=val1&amp;key2=val2&amp;...)</span><br><span class="line">            .then((response) =&gt; response.json())      //将Promise对象转换成json对象</span><br><span class="line">            .then((json) =&gt; &#123;</span><br><span class="line">                //处理返回值</span><br><span class="line">            &#125;)</span><br><span class="line">            .catch((error) =&gt; &#123;</span><br><span class="line">                //异常处理</span><br><span class="line">       	   &#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="post-请求"><a href="#post-请求" class="headerlink" title="post 请求"></a>post 请求</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fetch(url,&#123;</span><br><span class="line">          method: &apos;POST&apos;,</span><br><span class="line">          headers: &#123;</span><br><span class="line">             &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          body: key1=val1&amp;key2=val2&amp;...</span><br><span class="line">        &#125;)</span><br><span class="line">        .then((response) =&gt; &#123;</span><br><span class="line">          return response.json();</span><br><span class="line">        &#125;)</span><br><span class="line">        .then((info) =&gt; &#123;</span><br><span class="line">          //处理返回值</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((error) =&gt; &#123;</span><br><span class="line">          //异常处理</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="delete-请求"><a href="#delete-请求" class="headerlink" title="delete 请求"></a>delete 请求</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fetch(url,&#123;</span><br><span class="line">          method: &apos;delete&apos;,      // 大小写均可</span><br><span class="line">          headers: &#123;</span><br><span class="line">             &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          body: key1=val1&amp;key2=val2&amp;...</span><br><span class="line">        &#125;)</span><br><span class="line">        .then((response) =&gt; &#123;</span><br><span class="line">          return response.json();</span><br><span class="line">        &#125;)</span><br><span class="line">        .then((info) =&gt; &#123;</span><br><span class="line">          //处理返回值</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((error) =&gt; &#123;</span><br><span class="line">          //异常处理</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>

        
      </div>
    </article>
  
    <article class="post">
      <div class="post-meta">
        <span class="post-time">2018-09-05</span>
      </div>
      <div class="post-title">
        
          <a class="post-title-link" href="/2018/09/05/axios/axios/">
            
              Axios
            
          </a>
          
        
        <div class="post-tags">
          
        </div>
      </div>
      <div class="post-content">

        

        
        <p>#Axios</p>
<p>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p>
<h4 id="1-GET请求"><a href="#1-GET请求" class="headerlink" title="1. GET请求"></a>1. GET请求</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">'/user?ID=12345'</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line">axios.get(<span class="string">'/user'</span>, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: <span class="number">12345</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<h4 id="2-POST请求"><a href="#2-POST请求" class="headerlink" title="2. POST请求"></a>2. POST请求</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">'/user'</span>, &#123;</span><br><span class="line">    firstName: <span class="string">'Fred'</span>,</span><br><span class="line">    lastName: <span class="string">'Flintstone'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<h4 id="3-执行多个并发请求"><a href="#3-执行多个并发请求" class="headerlink" title="3. 执行多个并发请求"></a>3. 执行多个并发请求</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserAccount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/user/12345'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserPermissions</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/user/12345/permissions'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(<span class="function"><span class="keyword">function</span> (<span class="params">acct, perms</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 两个请求现在都执行完成</span></span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure>
<h4 id="4-axios-API"><a href="#4-axios-API" class="headerlink" title="4. axios API"></a>4. axios API</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发送 POST 请求</span></span><br><span class="line">axios(&#123;</span><br><span class="line">  method: <span class="string">'post'</span>,</span><br><span class="line">  url: <span class="string">'/user/12345'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: <span class="string">'Fred'</span>,</span><br><span class="line">    lastName: <span class="string">'Flintstone'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发送 GET 请求（默认的方法）</span></span><br><span class="line">axios(<span class="string">'/user/12345'</span>);</span><br></pre></td></tr></table></figure>
<h4 id="5-关于返回值"><a href="#5-关于返回值" class="headerlink" title="5. 关于返回值"></a>5. 关于返回值</h4><p>返回的是一个 data 对象，而不是直接返回所需的 data 数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">'http://localhost:8080/todos/getDataAll'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>返回值：</p>
<p><img src="/Users/renyan/myNotes/axios/imgs/axios.png" alt=""></p>

        
      </div>
    </article>
  
</section>



      </div>
        <div class="footer">
  <div class="footer-wrapper">
    <div class="copyright">
      
      <span>&copy;</span>
      
      <span>2017 - 2019</span>
      
      <span class="author"><i class="fa fa-user"></i>Lemon</span>
    </div>
    
      <span>Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> </span>
    
    
      <span>|</span> <span>Theme - <a href="https://github.com/littleee/corazon">Corazon</a></span>
      
        <span>v1.0.0</span>
      
    
  </div>
</div>

    </main>
  </body>
</html>
