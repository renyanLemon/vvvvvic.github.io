<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>WebSocket</title>
      <link href="/2020/09/16/WebSocket/webSocket/"/>
      <url>/2020/09/16/WebSocket/webSocket/</url>
      
        <content type="html"><![CDATA[<h6 id="特点"><a href="#特点" class="headerlink" title="特点:"></a>特点:</h6><ul><li>服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息</li><li>建立在 TCP 协议之上，服务器端的实现比较容易。</li><li>与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。</li><li>数据格式比较轻量，性能开销小，通信高效。</li><li>可以发送文本，也可以发送二进制数据。</li><li>没有同源限制，客户端可以与任意服务器通信。</li><li>协议标识符是ws（如果加密，则为wss），服务器网址就是 URL。</li></ul><a id="more"></a><h6 id="代码实现："><a href="#代码实现：" class="headerlink" title="代码实现："></a>代码实现：</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    websock:null,</span><br><span class="line">    lockReconnect: false, //是否真正建立链接</span><br><span class="line">    timeout: 300000, //30秒一次心跳</span><br><span class="line">    timeoutObj: null, //心跳倒计时</span><br><span class="line">    serverTimeoutObj: null, //心跳倒计时</span><br><span class="line">    timeoutnum: null, //断开重连倒计时</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">  //初始化WebSocket</span><br><span class="line">  initWebSocket()&#123;</span><br><span class="line">    var wsurl = &quot;wss://&quot;+location.host+&quot;……&quot;</span><br><span class="line">    if(location.host===&apos;localhost:8080&apos;) &#123;</span><br><span class="line">      wsurl = &quot;ws://&quot;+location.host+&quot;……&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    this.websock = new WebSocket(wsurl)</span><br><span class="line">    this.websock.onopen = this.webscoketonopen</span><br><span class="line">    this.websock.onerror = this.webscoketonerror</span><br><span class="line">    this.websock.onmessage = this.webscoketonmessage</span><br><span class="line">    this.websock.onclose = this.webscoketonclose</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  webscoketonopen() &#123;</span><br><span class="line">    console.log(&apos;链接成功&apos;)</span><br><span class="line">    //开启心跳</span><br><span class="line">    this.startHearthBeat()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  webscoketonerror() &#123;</span><br><span class="line">    console.log(&apos;链接失败&apos;)</span><br><span class="line">    //重连</span><br><span class="line">    this.reconnect()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  webscoketonmessage(e) &#123;</span><br><span class="line">    if(e.data === &apos;链接成功&apos; || e.data === &apos;ping&apos;) &#123;</span><br><span class="line">      console.log(e)</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">      …………</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  webscoketonclose(e) &#123;</span><br><span class="line">    console.log(&quot;断开链接&quot;)</span><br><span class="line">    this.reconnect()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  startHearthBeat() &#123;</span><br><span class="line">    this.timeoutObj &amp;&amp; clearTimeout(this.timeoutObj)</span><br><span class="line">    this.serverTimeoutObj &amp;&amp; clearTimeout(this.serverTimeoutObj)</span><br><span class="line">    this.timeoutObj = setTimeout(function() &#123;</span><br><span class="line">      //这里发送一个心跳，后端收到，返回一个心跳信息</span><br><span class="line">      console.log(this.websock.readyState)</span><br><span class="line">      if(this.websock.readyState === 1) &#123;</span><br><span class="line">        //链接正常</span><br><span class="line">        this.websock.send(&apos;ping&apos;)        </span><br><span class="line">      &#125;else &#123;</span><br><span class="line">        //否则重链</span><br><span class="line">        this.reconnect()</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      this.serverTimeoutObj = setTimeout(function() &#123;</span><br><span class="line">        console.log(&apos;超时关闭&apos;)</span><br><span class="line">        &#125;,this.timeout)</span><br><span class="line"></span><br><span class="line">      &#125;, this.timeout)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  reconnect() &#123;</span><br><span class="line">    if(this.lockReconnect) &#123;</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line">    this.lockReconnect = true</span><br><span class="line">    this.timeoutnum &amp;&amp; clearTimeout(this.timeoutnum)</span><br><span class="line">    this.timeoutnum = setTimeout(function() &#123;</span><br><span class="line">      this.initWebSocket()</span><br><span class="line">      this.lockReconnect = false</span><br><span class="line">      &#125;,5000)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="心跳重连缘由"><a href="#心跳重连缘由" class="headerlink" title="心跳重连缘由"></a>心跳重连缘由</h6><p>在使用websocket过程中，可能会出现网络断开的情况，比如信号不好，或者网络临时性关闭，这时候websocket的连接已经断开，<br>而浏览器不会执行websocket 的 onclose方法，我们无法知道是否断开连接，也就无法进行重连操作。<br>如果当前发送websocket数据到后端，一旦请求超时，onclose便会执行，这时候便可进行绑定好的重连操作。<br>因此websocket心跳重连就应运而生。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>dependencies与devDependencies的区别</title>
      <link href="/2020/08/20/node/dependencies/"/>
      <url>/2020/08/20/node/dependencies/</url>
      
        <content type="html"><![CDATA[<p>npm install在安装node模块时，有两种命令参数可以把它们的信息写入package.json文件：</p><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install *** --save</span><br><span class="line">npm install ***  --save-dev</span><br><span class="line"><span class="comment">//–save会把依赖包名称添加到package.json文件dependencies键下</span></span><br><span class="line"><span class="comment">//–save-dev则添加到package.json文件devDependencies键下</span></span><br></pre></td></tr></table></figure><p>devDependencies  里面的插件只用于开发环境，不用于生产环境，而 dependencies  是需要发布到生产环境的。<br>比如我们写一个项目要依赖于jQuery，没有这个包的依赖运行就会报错，这时候就把这个依赖写入dependencies ；<br>而我们使用的一些构建工具比如glup、webpack这些只是在开发中使用的包，上线以后就和他们没关系了，所以将它写入devDependencies。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript reduce() 方法</title>
      <link href="/2020/08/17/array-method/reduce/"/>
      <url>/2020/08/17/array-method/reduce/</url>
      
        <content type="html"><![CDATA[<h5 id="reduce-方法用于对数组的元素进行排序。"><a href="#reduce-方法用于对数组的元素进行排序。" class="headerlink" title="reduce() 方法用于对数组的元素进行排序。"></a>reduce() 方法用于对数组的元素进行排序。</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">total, currentValue, currentIndex, arr</span>), <span class="title">initialValue</span>)</span></span><br></pre></td></tr></table></figure><a id="more"></a><h5 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h5><p>function(total,currentValue, index,arr)</p><ul><li>total    必需。初始值, 或者计算结束后的返回值。</li><li>currentValue    必需。当前元素</li><li>currentIndex    可选。当前元素的索引</li><li>arr    可选。当前元素所属的数组对象。</li></ul><p>initialValue 可选。传递给函数的初始值</p><h5 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h5><ul><li>函数累计处理的结果</li></ul><p>如果数组为空且没有提供initialValue，会抛出TypeError 。如果数组仅有一个元素（无论位置如何）并且没有提供initialValue， 或者有提供initialValue但是数组为空，那么此唯一值将被返回并且callback不会被执行。</p><h5 id="将二维数组转化为一维"><a href="#将二维数组转化为一维" class="headerlink" title="将二维数组转化为一维"></a>将二维数组转化为一维</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flattened = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduce(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.concat(b);</span><br><span class="line">  &#125;,</span><br><span class="line">  []</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>箭头函数的形式<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flattened = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduce(</span><br><span class="line"> ( acc, cur ) =&gt; acc.concat(cur),</span><br><span class="line"> []</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><ul><li>a []                b  [0, 1]</li><li>a [0, 1]            b  [2, 3]</li><li>a  [0, 1, 2, 3]     b  [4, 5]</li><li>flattened  [0, 1, 2, 3, 4, 5]</li></ul><h5 id="计算数组中每个元素出现的次数"><a href="#计算数组中每个元素出现的次数" class="headerlink" title="计算数组中每个元素出现的次数"></a>计算数组中每个元素出现的次数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">'Alice'</span>, <span class="string">'Bob'</span>, <span class="string">'Tiff'</span>, <span class="string">'Bruce'</span>, <span class="string">'Alice'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> countedNames = names.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">allNames, name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (name <span class="keyword">in</span> allNames) &#123;</span><br><span class="line">    allNames[name]++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    allNames[name] = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> allNames;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"><span class="comment">// countedNames is:</span></span><br><span class="line"><span class="comment">// &#123; 'Alice': 2, 'Bob': 1, 'Tiff': 1, 'Bruce': 1 &#125;</span></span><br></pre></td></tr></table></figure><h5 id="按属性对object分类"><a href="#按属性对object分类" class="headerlink" title="按属性对object分类"></a>按属性对object分类</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> people = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'Alice'</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'Max'</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'Jane'</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">groupBy</span>(<span class="params">objectArray, property</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> objectArray.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">acc, obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> key = obj[property];</span><br><span class="line">    <span class="keyword">if</span> (!acc[key]) &#123;</span><br><span class="line">      acc[key] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    acc[key].push(obj);</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> groupedPeople = groupBy(people, <span class="string">'age'</span>);</span><br><span class="line"><span class="comment">// groupedPeople is:</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   20: [</span></span><br><span class="line"><span class="comment">//     &#123; name: 'Max', age: 20 &#125;,</span></span><br><span class="line"><span class="comment">//     &#123; name: 'Jane', age: 20 &#125;</span></span><br><span class="line"><span class="comment">//   ],</span></span><br><span class="line"><span class="comment">//   21: [&#123; name: 'Alice', age: 21 &#125;]</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h5 id="使用扩展运算符和initialValue绑定包含在对象数组中的数组"><a href="#使用扩展运算符和initialValue绑定包含在对象数组中的数组" class="headerlink" title="使用扩展运算符和initialValue绑定包含在对象数组中的数组"></a>使用扩展运算符和initialValue绑定包含在对象数组中的数组</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// friends - 对象数组</span></span><br><span class="line"><span class="comment">// where object field "books" - list of favorite books</span></span><br><span class="line"><span class="keyword">var</span> friends = [&#123;</span><br><span class="line">  name: <span class="string">'Anna'</span>,</span><br><span class="line">  books: [<span class="string">'Bible'</span>, <span class="string">'Harry Potter'</span>],</span><br><span class="line">  age: <span class="number">21</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: <span class="string">'Bob'</span>,</span><br><span class="line">  books: [<span class="string">'War and peace'</span>, <span class="string">'Romeo and Juliet'</span>],</span><br><span class="line">  age: <span class="number">26</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: <span class="string">'Alice'</span>,</span><br><span class="line">  books: [<span class="string">'The Lord of the Rings'</span>, <span class="string">'The Shining'</span>],</span><br><span class="line">  age: <span class="number">18</span></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// allbooks - list which will contain all friends' books +  </span></span><br><span class="line"><span class="comment">// additional list contained in initialValue</span></span><br><span class="line"><span class="keyword">var</span> allbooks = friends.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">prev, curr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [...prev, ...curr.books];</span><br><span class="line">&#125;, [<span class="string">'Alphabet'</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// allbooks = [</span></span><br><span class="line"><span class="comment">//   'Alphabet', 'Bible', 'Harry Potter', 'War and peace',</span></span><br><span class="line"><span class="comment">//   'Romeo and Juliet', 'The Lord of the Rings',</span></span><br><span class="line"><span class="comment">//   'The Shining'</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><h5 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myArray = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>, <span class="string">'e'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'d'</span>, <span class="string">'d'</span>, <span class="string">'d'</span>]</span><br><span class="line"><span class="keyword">let</span> myOrderedArray = myArray.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">accumulator, currentValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (accumulator.indexOf(currentValue) === <span class="number">-1</span>) &#123;</span><br><span class="line">    accumulator.push(currentValue)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> accumulator</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> result = arr.sort().reduce(<span class="function">(<span class="params">init, current</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(init.length === <span class="number">0</span> || init[init.length<span class="number">-1</span>] !== current) &#123;</span><br><span class="line">        init.push(current);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> init;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h5 id="按顺序运行Promise"><a href="#按顺序运行Promise" class="headerlink" title="按顺序运行Promise"></a>按顺序运行Promise</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Runs promises from array of functions that can return promises</span></span><br><span class="line"><span class="comment"> * in chained manner</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param &#123;array&#125; arr - promise arr</span></span><br><span class="line"><span class="comment"> * @return &#123;Object&#125; promise object</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runPromiseInSequence</span>(<span class="params">arr, input</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.reduce(</span><br><span class="line">    (promiseChain, currentFunction) =&gt; promiseChain.then(currentFunction),</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(input)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// promise function 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p1</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(a * <span class="number">5</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// promise function 2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p2</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(a * <span class="number">2</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function 3  - will be wrapped in a resolved promise by .then()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> a * <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// promise function 4</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p4</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(a * <span class="number">4</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseArr = [p1, p2, f3, p4];</span><br><span class="line">runPromiseInSequence(promiseArr, <span class="number">10</span>)</span><br><span class="line">  .then(<span class="built_in">console</span>.log);   <span class="comment">// 1200</span></span><br></pre></td></tr></table></figure><h5 id="使用-reduce实现map"><a href="#使用-reduce实现map" class="headerlink" title="使用 reduce实现map"></a>使用 reduce实现map</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">Array</span>.prototype.mapUsingReduce) &#123;</span><br><span class="line">  <span class="built_in">Array</span>.prototype.mapUsingReduce = <span class="function"><span class="keyword">function</span>(<span class="params">callback, thisArg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">mappedArray, currentValue, index, array</span>) </span>&#123;</span><br><span class="line">      mappedArray[index] = callback.call(thisArg, currentValue, index, array)</span><br><span class="line">      <span class="keyword">return</span> mappedArray</span><br><span class="line">    &#125;, [])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, , <span class="number">3</span>].mapUsingReduce(</span><br><span class="line">  (currentValue, index, array) =&gt; currentValue + index + array.length</span><br><span class="line">) <span class="comment">// [5, 7, , 10]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>文件导出</title>
      <link href="/2020/07/08/exportfile/exportfile/"/>
      <url>/2020/07/08/exportfile/exportfile/</url>
      
        <content type="html"><![CDATA[<p>blob</p><a id="more"></a><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">exportHandle() &#123;</span><br><span class="line">  <span class="keyword">let</span> token = localStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">  <span class="keyword">let</span> configHeaders = &#123;</span><br><span class="line">    <span class="string">'Accept'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/json; charset=UTF-8'</span>,</span><br><span class="line">    …………</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> params = &#123;</span><br><span class="line">    ids: <span class="keyword">this</span>.id</span><br><span class="line">  &#125;</span><br><span class="line">  axios(&#123;</span><br><span class="line">    <span class="string">'method'</span>: <span class="string">'post'</span>,</span><br><span class="line">    <span class="string">'url'</span>: <span class="string">'……'</span>,</span><br><span class="line">    <span class="string">'data'</span>: params,</span><br><span class="line">    <span class="string">'headers'</span>: configHeaders,</span><br><span class="line">    <span class="string">'responseType'</span>: <span class="string">'blob'</span></span><br><span class="line">    &#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(data.data.type === <span class="string">'application/json'</span>) &#123;</span><br><span class="line">        <span class="comment">//导出失败，返回失败原因</span></span><br><span class="line">        <span class="keyword">let</span> reader = <span class="keyword">new</span> FileReader()</span><br><span class="line">        reader.readAsText(data.data, <span class="string">'utf-8'</span>)</span><br><span class="line">        reader.onload = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> result = <span class="built_in">JSON</span>.parse(reader.result)</span><br><span class="line">          <span class="keyword">this</span>.$message.warning(result.msg)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//导出成功，下载导出文件</span></span><br><span class="line">        <span class="keyword">const</span> blob = <span class="keyword">new</span> Blob([data.data], &#123;</span><br><span class="line">          type: <span class="string">'application/vnd.ms-excel;charset=utf-8'</span></span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="keyword">const</span> fileName = <span class="string">'导出文件.xlsx'</span></span><br><span class="line">          <span class="keyword">const</span> elink = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">          elink.download = fileName</span><br><span class="line">          elink.style.display = <span class="string">'none'</span></span><br><span class="line">          elink.href = URL.createObjectURL(blob)</span><br><span class="line">          <span class="built_in">document</span>.body.appendChild(elink)</span><br><span class="line">          elink.click()</span><br><span class="line">          URL.revokeObjectURL(elink.href)</span><br><span class="line">          <span class="built_in">document</span>.body.removeChild(elink)</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Blob，Binary Large Object的缩写，代表二进制类型的大对象。</p><p>在Web中，Blob 对象表示一个不可变、原始数据的类文件对象。</p><p>File 接口基于Blob，继承了 blob 的功能并将其扩展使其支持用户系统上的文件。</p><h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Blob(blobParts[, options])</span><br></pre></td></tr></table></figure><p>参数说明：</p><ul><li>blobParts：数组类型，数组中的每一项连接起来构成Blob对象的数据，数组中的每项元素可以是ArrayBuffer, ArrayBufferView, Blob, DOMString 。</li><li><p>options：可选项，字典格式类型，可以指定如下两个属性：</p></li><li><p>type，默认值为 “”，它代表了将会被放入到blob中的数组内容的MIME类型。</p></li><li>endings，默认值为”transparent”，用于指定包含行结束符\n的字符串如何被写入。 它是以下两个值中的一个： “native”，表示行结束符会被更改为适合宿主操作系统文件系统的换行符； “transparent”，表示会保持blob中保存的结束符不变。</li></ul><p>例如：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data1 = <span class="string">"a"</span>;</span><br><span class="line"><span class="keyword">var</span> data2 = <span class="string">"b"</span>;</span><br><span class="line"><span class="keyword">var</span> data3 = <span class="string">"&lt;div style='color:red;'&gt;This is a blob&lt;/div&gt;"</span>;</span><br><span class="line"><span class="keyword">var</span> data4 = &#123; <span class="string">"name"</span>: <span class="string">"abc"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> blob1 = <span class="keyword">new</span> Blob([data1]);</span><br><span class="line"><span class="keyword">var</span> blob2 = <span class="keyword">new</span> Blob([data1, data2]);</span><br><span class="line"><span class="keyword">var</span> blob3 = <span class="keyword">new</span> Blob([data3]);</span><br><span class="line"><span class="keyword">var</span> blob4 = <span class="keyword">new</span> Blob([<span class="built_in">JSON</span>.stringify(data4)]);</span><br><span class="line"><span class="keyword">var</span> blob5 = <span class="keyword">new</span> Blob([data4]);</span><br><span class="line"><span class="keyword">var</span> blob6 = <span class="keyword">new</span> Blob([data3, data4]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(blob1);  <span class="comment">//输出：Blob &#123;size: 1, type: ""&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(blob2);  <span class="comment">//输出：Blob &#123;size: 2, type: ""&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(blob3);  <span class="comment">//输出：Blob &#123;size: 44, type: ""&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(blob4);  <span class="comment">//输出：Blob &#123;size: 14, type: ""&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(blob5);  <span class="comment">//输出：Blob &#123;size: 15, type: ""&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(blob6);  <span class="comment">//输出：Blob &#123;size: 59, type: ""&#125;</span></span><br></pre></td></tr></table></figure></p><h3 id="slice方法"><a href="#slice方法" class="headerlink" title="slice方法"></a>slice方法</h3><p>Blob对象有一个slice方法，返回一个新的 Blob对象，包含了源 Blob对象中指定范围内的数据。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slice([start[, end[, contentType]]])</span><br></pre></td></tr></table></figure></p><p>参数说明：</p><ul><li>start： 可选，代表 Blob 里的下标，表示第一个会被会被拷贝进新的 Blob 的字节的起始位置。如果传入的是一个负数，那么这个偏移量将会从数据的末尾从后到前开始计算。</li><li>end： 可选，代表的是 Blob 的一个下标，这个下标-1的对应的字节将会是被拷贝进新的Blob 的最后一个字节。如果你传入了一个负数，那么这个偏移量将会从数据的末尾从后到前开始计算。</li><li>contentType： 可选，给新的 Blob 赋予一个新的文档类型。这将会把它的 type 属性设为被传入的值。它的默认值是一个空的字符串。</li></ul><p>例如：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="string">"abcdef"</span>;</span><br><span class="line"><span class="keyword">var</span> blob1 = <span class="keyword">new</span> Blob([data]);</span><br><span class="line"><span class="keyword">var</span> blob2 = blob1.slice(<span class="number">0</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(blob1);  <span class="comment">//输出：Blob &#123;size: 6, type: ""&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(blob2);  <span class="comment">//输出：Blob &#123;size: 3, type: ""&#125;</span></span><br></pre></td></tr></table></figure></p><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>Blob.size      Blob 对象中所包含数据的大小（字节）。<br>Blob.type      一个字符串，表明该 Blob 对象所包含数据的 MIME 类型。如果类型未知，则该值为空字符串。</p><h3 id="Blob使用场景"><a href="#Blob使用场景" class="headerlink" title="Blob使用场景"></a>Blob使用场景</h3><ol><li><p>File继承自Blob，因此我们可以调用slice方法对大文件进行分片长传。</p></li><li><p>Blob URL</p></li></ol><p>Blob URL是blob协议的URL，它的格式如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blob:http:<span class="comment">//XXX</span></span><br></pre></td></tr></table></figure></p><p>Blob URL可以通过URL.createObjectURL(blob)创建。在绝大部分场景下，我们可以像使用Http协议的URL一样，使用Blob URL。常见的场景有：作为文件的下载地址和作为图片资源地址。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;Blob Test&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script&gt;</span></span><br><span class="line"><span class="regexp">        function createDownloadFile() &#123;</span></span><br><span class="line"><span class="regexp">            var content = "Blob Data";</span></span><br><span class="line"><span class="regexp">            var blob = new Blob([content]);</span></span><br><span class="line"><span class="regexp">            var link = document.getElementsByTagName("a")[0];</span></span><br><span class="line"><span class="regexp">            link.download = "file";</span></span><br><span class="line"><span class="regexp">            link.href = URL.createObjectURL(blob);</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        window.onload = createDownloadFile;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>script&gt;</span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">    &lt;a&gt;下载&lt;/</span>a&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure><p>点击下载按钮，浏览器将会下载一个名为file的文件，文件的内容是：Blob Data。通过Blob对象，我们在前端代码中就可以动态生成文件，提供给浏览器下载。打开Chrome浏览器调试窗口，在Elements标签下可以看到生成的Blob URL为：</p><p><img src="../../images/blobUrl.png" alt="avatar"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>vue项目前端下载文件</title>
      <link href="/2020/07/03/vue/dowmloadFile/"/>
      <url>/2020/07/03/vue/dowmloadFile/</url>
      
        <content type="html"><![CDATA[<ul><li>问题：<br>不调取后端接口下载文件</li></ul><a id="more"></a><h3 id="解决-将文件放在public目录下"><a href="#解决-将文件放在public目录下" class="headerlink" title="解决  将文件放在public目录下"></a>解决  将文件放在public目录下</h3><p>静态资源可以通过两种方式进行处理：</p><p>在 JavaScript 被导入或在 template/CSS 中通过相对路径被引用。这类引用会被 webpack 处理。</p><p>放置在 public 目录下或通过绝对路径被引用。这类资源将会直接被拷贝，而不会经过 webpack 的处理。</p><p><img src="/.io//dowmloadFile.jpeg" alt="avatar"></p><p>在所需要下载的页面，用 a 标签 download 属性 进行下载</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;/员工批量导入.xlsx&quot; download&gt;下载模版&lt;/a&gt;</span><br></pre></td></tr></table></figure><h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p>download 属性规定被下载的超链接目标。</p><p>在 <a> 标签中必须设置 href 属性。</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>使用vueX进行组件间异步传值</title>
      <link href="/2020/07/03/vuex/vuex/"/>
      <url>/2020/07/03/vuex/vuex/</url>
      
        <content type="html"><![CDATA[<ul><li>问题：<br>A、B两个兄弟组件，B组件需要A组件ajax请求回来的数据来渲染页面。<br>B组件在A组件异步完成之前就已经完成渲染了，导致B组件的数据没有来得及渲染。</li></ul><a id="more"></a><h3 id="解决-【computed】"><a href="#解决-【computed】" class="headerlink" title="解决  【computed】"></a>解决  【computed】</h3><h6 id="leftMenu-vue"><a href="#leftMenu-vue" class="headerlink" title="leftMenu.vue"></a>leftMenu.vue</h6>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- menuAry  是ajax请求回来的数据 --&gt;</span><br><span class="line"></span><br><span class="line">this.$store.commit(&apos;setLeftMenuAry&apos;, this.menuAry)</span><br></pre></td></tr></table></figure><h6 id="store-js"><a href="#store-js" class="headerlink" title="store.js"></a>store.js</h6>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setLeftMenuAry(state,val) &#123;</span><br><span class="line">  state.leftMenuAry = val</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="home-vue"><a href="#home-vue" class="headerlink" title="home.vue"></a>home.vue</h6>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- leftMenuAry  是渲染页面的数据 --&gt;</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">  leftMenuAry() &#123;</span><br><span class="line">    let leftMenuAry = this.$store.state.leftMenuAry</span><br><span class="line">    return leftMenuAry</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p>data 中的内容只会在 created 钩子触发前初始化一次。data 中内容依赖变更时，data 属性不会变更（它的设计目标就是保存组件的局部状态数据而已）。<br>而 computed 则是通过【依赖追踪】实现的，在 computed 求值时引用的 Vue 变量变化时，会触发对 computed 的重新计算。所以可以使用 computed 去引用 Vuex 状态变量，从而使得依赖追踪生效。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript sort() 方法</title>
      <link href="/2019/12/20/array-method/sort/"/>
      <url>/2019/12/20/array-method/sort/</url>
      
        <content type="html"><![CDATA[<h5 id="sort-方法用于对数组的元素进行排序。"><a href="#sort-方法用于对数组的元素进行排序。" class="headerlink" title="sort() 方法用于对数组的元素进行排序。"></a>sort() 方法用于对数组的元素进行排序。</h5><ul><li>arrayObject.sort(sortby)</li></ul><a id="more"></a><h5 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h5><ul><li>sortby   可选。规定排序顺序。必须是函数。</li></ul><h5 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h5><ul><li>对数组的引用。在原数组上进行排序，不生成副本。</li></ul><ul><li><p>如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。</p></li><li><p>如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。</span><br><span class="line">若 a 等于 b，则返回 0。</span><br><span class="line">若 a 大于 b，则返回一个大于 0 的值。</span><br></pre></td></tr></table></figure><ul><li><p>例子</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function sortNumber(a,b)&#123;</span><br><span class="line">  return a - b</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">var arr = new Array(6)</span><br><span class="line">arr[0] = &quot;10&quot;</span><br><span class="line">arr[1] = &quot;5&quot;</span><br><span class="line">arr[2] = &quot;40&quot;</span><br><span class="line">arr[3] = &quot;25&quot;</span><br><span class="line">arr[4] = &quot;1000&quot;</span><br><span class="line">arr[5] = &quot;1&quot;</span><br><span class="line"></span><br><span class="line">document.write(arr.sort(sortNumber))</span><br></pre></td></tr></table></figure></li><li><p>输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1,5,10,25,40,1000</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>找到具有最大和的连续子数组</title>
      <link href="/2019/12/18/algorithm/dynamic-programming/"/>
      <url>/2019/12/18/algorithm/dynamic-programming/</url>
      
        <content type="html"><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个整数数组 nums ，找到一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。</p><a id="more"></a><h6 id="示例"><a href="#示例" class="headerlink" title="示例:"></a>示例:</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: [-2,1,-3,4,-1,2,1,-5,4],</span><br><span class="line">输出: 6</span><br><span class="line">解释: 连续子数组 [4,-1,2,1] 的和最大，为 6。</span><br></pre></td></tr></table></figure><h6 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路:"></a>解题思路:</h6><p>通常我们遍历子串或者子序列有三种遍历方式：[a, b , c, d , e]</p><ul><li>以某个节点为开头的所有子序列: 如 [a]，[a, b]，[ a, b, c] … 再从以 b 为开头的子序列开始遍历 [b] [b, c]。</li><li>根据子序列的长度为标杆，如先遍历出子序列长度为 1 的子序列，在遍历出长度为 2 的 等等。</li><li>以子序列的结束节点为基准，先遍历出以某个节点为结束的所有子序列，因为每个节点都可能会是子序列的结束节点，因此要遍历下整个序列，如: 以 b 为结束点的所有子序列: [a , b] [b] 以 c 为结束点的所有子序列: [a, b, c] [b, c] [ c ]。</li></ul><h6 id="Kadane算法"><a href="#Kadane算法" class="headerlink" title="Kadane算法:"></a>Kadane算法:</h6><ul><li>Kadane算法扫描一次整个数列的所有数值，</li><li>在每一个扫描点计算以该点数值为结束点的子数列的最大和（正数和）。</li><li>该子数列由两部分组成：以前一个位置为结束点的最大子数列、该位置的数值。</li><li>因为该算法用到了“最佳子结构”（以每个位置为终点的最大子数列都是基于其前一位置的最大子数列计算得出,</li><li>该算法可看成动态规划的一个例子。</li><li>状态转移方程：sum[i] = max{sum[i-1]+a[i],a[i]}   </li><li>其中(sum[i]记录以a[i]为子序列末端的最大序子列连续和)</li></ul><h6 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function  maxSubArray2  ( nums ) &#123;</span><br><span class="line">    if (!nums.length) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    let max_ending_here = nums[0];</span><br><span class="line">    let max_so_far = nums[0];</span><br><span class="line"></span><br><span class="line">    for (let i = 1; i &lt; nums.length; i ++ ) &#123;</span><br><span class="line">        max_ending_here = Math.max ( nums[i], max_ending_here + nums[i]);</span><br><span class="line">        max_so_far = Math.max ( max_so_far, max_ending_here);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return max_so_far;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var maxSubArray = function(nums) &#123;</span><br><span class="line">    let ans = nums[0];</span><br><span class="line">    let sum = 0;</span><br><span class="line">    for(let num of nums) &#123;</span><br><span class="line">        if(sum + num &gt; num )&#123;</span><br><span class="line">            sum = sum + num;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            sum = num;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = Math.max(ans, sum);</span><br><span class="line">    &#125;;</span><br><span class="line">    return ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h3><p>使用动态规划方法解题有较高的时间效率，关键在于它减少了很多不必要的计算和重复计算的部分</p><p>链接：<a href="https://leetcode-cn.com/problems/maximum-subarray/solution/xiang-xi-jie-du-dong-tai-gui-hua-de-shi-xian-yi-li/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/maximum-subarray/solution/xiang-xi-jie-du-dong-tai-gui-hua-de-shi-xian-yi-li/</a><br>来源：力扣（LeetCode）</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>有效的括号</title>
      <link href="/2019/12/13/algorithm/valid-parentheses/"/>
      <url>/2019/12/13/algorithm/valid-parentheses/</url>
      
        <content type="html"><![CDATA[<h5 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h5><p>给定一个只包括 ‘(‘，’)’，’{‘，’}’，’[‘，’]’ 的字符串，判断字符串是否有效。</p><p>有效字符串需满足：</p><ul><li>左括号必须用相同类型的右括号闭合。</li><li>左括号必须以正确的顺序闭合。</li><li>注意空字符串可被认为是有效字符串。</li></ul><a id="more"></a><h6 id="示例-1-输入-“-”-输出-true"><a href="#示例-1-输入-“-”-输出-true" class="headerlink" title="示例 1:输入: “()”           输出: true"></a>示例 1:输入: “()”           输出: true</h6><h6 id="示例-2-输入-“-”-输出-true"><a href="#示例-2-输入-“-”-输出-true" class="headerlink" title="示例 2:输入: “()[]{}”       输出: true"></a>示例 2:输入: “()[]{}”       输出: true</h6><h6 id="示例-3-输入-“-”-输出-false"><a href="#示例-3-输入-“-”-输出-false" class="headerlink" title="示例 3:输入: “(]”           输出: false"></a>示例 3:输入: “(]”           输出: false</h6><h6 id="示例-4-输入-“-”-输出-false"><a href="#示例-4-输入-“-”-输出-false" class="headerlink" title="示例 4:输入: “([)]”         输出: false"></a>示例 4:输入: “([)]”         输出: false</h6><h6 id="示例-5-输入-“-”-输出-true"><a href="#示例-5-输入-“-”-输出-true" class="headerlink" title="示例 5:输入: “{[]}”         输出: true"></a>示例 5:输入: “{[]}”         输出: true</h6><h5 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h5><p>可以边遍历边匹配。也就是遍历的时候遇到左括号存入数组，下次遇到的第一个右括号必须和数组中最后一个元素匹配，否则为无效字符串，匹配完成后从数组中删除此元素。若最终数组为空，表示括号已全部匹配完，字符串有效。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isValid = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> map = &#123;</span><br><span class="line">        <span class="string">"("</span>: <span class="string">")"</span>,</span><br><span class="line">        <span class="string">"["</span>: <span class="string">"]"</span>,</span><br><span class="line">        <span class="string">"&#123;"</span>: <span class="string">"&#125;"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> leftArr = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> ch <span class="keyword">of</span> s)&#123;</span><br><span class="line">        <span class="keyword">if</span> (ch <span class="keyword">in</span> map) leftArr.push(ch); <span class="comment">//为左括号时，顺序保存</span></span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">//为右括号时，与数组末位匹配</span></span><br><span class="line">            <span class="keyword">if</span>(ch != map[leftArr.pop()]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> !leftArr.length <span class="comment">//防止全部为左括号</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h4 id="in-运算符"><a href="#in-运算符" class="headerlink" title="in 运算符"></a>in 运算符</h4><p>如果指定的属性在指定的对象或其原型链中，则 in 运算符返回true。</p><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prop in object</span><br></pre></td></tr></table></figure><h5 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h5><ul><li>prop         一个字符串类型或者 symbol 类型的属性名或者数组索引（非symbol类型将会强制转为字符串）。</li><li>objectName   检查它（或其原型链）是否包含具有指定名称的属性的对象。</li></ul><h5 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h5><ul><li><p>数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> trees = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"redwood"</span>, <span class="string">"bay"</span>, <span class="string">"cedar"</span>, <span class="string">"oak"</span>, <span class="string">"maple"</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> trees        <span class="comment">// 返回true</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">in</span> trees        <span class="comment">// 返回true</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">in</span> trees        <span class="comment">// 返回false</span></span><br><span class="line"></span><br><span class="line"><span class="string">"bay"</span> <span class="keyword">in</span> trees    <span class="comment">// 返回false (必须使用索引号,而不是数组元素的值)</span></span><br><span class="line"></span><br><span class="line"><span class="string">"length"</span> <span class="keyword">in</span> trees <span class="comment">// 返回true (length是一个数组属性)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Symbol</span>.iterator <span class="keyword">in</span> trees <span class="comment">// 返回true (数组可迭代，只在ES2015+上有效)</span></span><br></pre></td></tr></table></figure></li><li><p>内置对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"PI"</span> <span class="keyword">in</span> <span class="built_in">Math</span>          <span class="comment">// 返回true</span></span><br></pre></td></tr></table></figure></li><li><p>自定义对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mycar = &#123;</span><br><span class="line">  make: <span class="string">"Honda"</span>,</span><br><span class="line">  model: <span class="string">"Accord"</span>,</span><br><span class="line">  year: <span class="number">1998</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">"make"</span> <span class="keyword">in</span> mycar  <span class="comment">// 返回true</span></span><br><span class="line"><span class="string">"model"</span> <span class="keyword">in</span> mycar <span class="comment">// 返回true</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h5><p>in右操作数必须是一个对象值。例如，你可以指定使用String构造函数创建的字符串，但不能指定字符串文字。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> color1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"green"</span>);</span><br><span class="line"><span class="string">"length"</span> <span class="keyword">in</span> color1 <span class="comment">// 返回true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> color2 = <span class="string">"coral"</span>;</span><br><span class="line"><span class="string">"length"</span> <span class="keyword">in</span> color2 <span class="comment">// 报错(color2不是对象)</span></span><br></pre></td></tr></table></figure></p><h4 id="对被删除或值为-undefined-的属性使用in"><a href="#对被删除或值为-undefined-的属性使用in" class="headerlink" title="对被删除或值为 undefined 的属性使用in"></a>对被删除或值为 undefined 的属性使用in</h4><ul><li>如果你使用 delete 运算符删除了一个属性，则 in 运算符对所删除属性返回 false。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mycar = &#123;<span class="attr">make</span>: <span class="string">"Honda"</span>, <span class="attr">model</span>: <span class="string">"Accord"</span>, <span class="attr">year</span>: <span class="number">1998</span>&#125;;</span><br><span class="line"><span class="keyword">delete</span> mycar.make;</span><br><span class="line"><span class="string">"make"</span> <span class="keyword">in</span> mycar;  <span class="comment">// 返回false</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> trees = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"redwood"</span>, <span class="string">"bay"</span>, <span class="string">"cedar"</span>, <span class="string">"oak"</span>, <span class="string">"maple"</span>);</span><br><span class="line"><span class="keyword">delete</span> trees[<span class="number">3</span>];</span><br><span class="line"><span class="number">3</span> <span class="keyword">in</span> trees; <span class="comment">// 返回false</span></span><br></pre></td></tr></table></figure><ul><li>如果你只是将一个属性的值赋值为undefined，而没有删除它，则 in 运算仍然会返回true。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mycar = &#123;<span class="attr">make</span>: <span class="string">"Honda"</span>, <span class="attr">model</span>: <span class="string">"Accord"</span>, <span class="attr">year</span>: <span class="number">1998</span>&#125;;</span><br><span class="line">mycar.make = <span class="literal">undefined</span>;</span><br><span class="line"><span class="string">"make"</span> <span class="keyword">in</span> mycar;  <span class="comment">// 返回true</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> trees = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"redwood"</span>, <span class="string">"bay"</span>, <span class="string">"cedar"</span>, <span class="string">"oak"</span>, <span class="string">"maple"</span>);</span><br><span class="line">trees[<span class="number">3</span>] = <span class="literal">undefined</span>;</span><br><span class="line"><span class="number">3</span> <span class="keyword">in</span> trees; <span class="comment">// 返回true</span></span><br><span class="line"><span class="string">"make"</span> <span class="keyword">in</span> mycar;  <span class="comment">// 返回true</span></span><br></pre></td></tr></table></figure><h4 id="继承属性"><a href="#继承属性" class="headerlink" title="继承属性"></a>继承属性</h4><p>如果一个属性是从原型链上继承来的，in 运算符也会返回 true。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"toString"</span> <span class="keyword">in</span> &#123;&#125;; <span class="comment">// 返回true</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>整数反转</title>
      <link href="/2019/12/12/algorithm/Integer-inversion/"/>
      <url>/2019/12/12/algorithm/Integer-inversion/</url>
      
        <content type="html"><![CDATA[<h5 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h5><p>给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转。</p><a id="more"></a><h6 id="示例-1-输入-123-输出-321"><a href="#示例-1-输入-123-输出-321" class="headerlink" title="示例 1:输入: 123   输出: 321"></a>示例 1:输入: 123   输出: 321</h6><h6 id="示例-2-输入-123-输出-321"><a href="#示例-2-输入-123-输出-321" class="headerlink" title="示例 2:输入: -123  输出: -321"></a>示例 2:输入: -123  输出: -321</h6><h6 id="示例-3-输入-120-输出-21"><a href="#示例-3-输入-120-输出-21" class="headerlink" title="示例 3:输入: 120   输出: 21"></a>示例 3:输入: 120   输出: 21</h6><h6 id="注意-假设我们的环境只能存储得下-32-位的有符号整数，则其数值范围为-−231-231-−-1-。请根据这个假设，如果反转后整数溢出那么就返回-0。"><a href="#注意-假设我们的环境只能存储得下-32-位的有符号整数，则其数值范围为-−231-231-−-1-。请根据这个假设，如果反转后整数溢出那么就返回-0。" class="headerlink" title="注意:假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 [−231,  231 − 1]。请根据这个假设，如果反转后整数溢出那么就返回 0。"></a>注意:假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 [−231,  231 − 1]。请根据这个假设，如果反转后整数溢出那么就返回 0。</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; x</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> reverse = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> overflow = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (x &gt;= <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span>) - <span class="number">1</span> || x &lt;= -<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span>)) ? <span class="number">0</span> : x</span><br><span class="line">    &#125;</span><br><span class="line">    x = overflow(x)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> isNegative = x &lt; <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> (isNegative) &#123;</span><br><span class="line">        x = -x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> (x &gt; <span class="number">9</span>) &#123;</span><br><span class="line">        a = a * <span class="number">10</span> + x % <span class="number">10</span> * <span class="number">10</span></span><br><span class="line">        x = <span class="built_in">parseInt</span>(x / <span class="number">10</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    a += x</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> isNegative ? overflow(-a) : overflow(a)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="Math-pow-x-y"><a href="#Math-pow-x-y" class="headerlink" title="Math.pow(x,y)"></a>Math.pow(x,y)</h5><p>pow() 方法可返回 x 的 y 次幂的值。</p><ul><li>x    必需。底数。必须是数字。</li><li>y    必需。幂数。必须是数字。</li><li>说明:如果结果是虚数或负数，则该方法将返回 NaN。如果由于指数过大而引起浮点溢出，则该方法将返回 Infinity。</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>二分法 与 JS移位运算符</title>
      <link href="/2019/12/11/algorithm/dichotomy/"/>
      <url>/2019/12/11/algorithm/dichotomy/</url>
      
        <content type="html"><![CDATA[<h3 id="二分法"><a href="#二分法" class="headerlink" title="二分法"></a>二分法</h3><p>适用于：数组、有序。<br>逻辑为：优先和数组的中间元素比较，如果等于中间元素，则直接返回。如果不等于则取半继续查找。</p><h5 id="题目描述："><a href="#题目描述：" class="headerlink" title="题目描述："></a>题目描述：</h5><p>给定一个排序数组和一个目标值，在数组中找到目标值，并返回其索引。如果目标值不存在于数组中，返回它将会被按顺序插入的位置。</p><a id="more"></a><h6 id="示例-1-输入-1-3-5-6-5-输出-2"><a href="#示例-1-输入-1-3-5-6-5-输出-2" class="headerlink" title="示例 1:   输入: [1,3,5,6], 5       输出: 2"></a>示例 1:   输入: [1,3,5,6], 5       输出: 2</h6><h6 id="示例-2-输入-1-3-5-6-2-输出-1"><a href="#示例-2-输入-1-3-5-6-2-输出-1" class="headerlink" title="示例 2:   输入: [1,3,5,6], 2       输出: 1"></a>示例 2:   输入: [1,3,5,6], 2       输出: 1</h6><h6 id="示例-3-输入-1-3-5-6-7-输出-4"><a href="#示例-3-输入-1-3-5-6-7-输出-4" class="headerlink" title="示例 3:   输入: [1,3,5,6], 7       输出: 4"></a>示例 3:   输入: [1,3,5,6], 7       输出: 4</h6><h6 id="示例-4-输入-1-3-5-6-0-输出-0"><a href="#示例-4-输入-1-3-5-6-0-输出-0" class="headerlink" title="示例 4:   输入: [1,3,5,6], 0       输出: 0"></a>示例 4:   输入: [1,3,5,6], 0       输出: 0</h6><h6 id="解答："><a href="#解答：" class="headerlink" title="解答："></a>解答：</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> searchInsert = <span class="function"><span class="keyword">function</span> (<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> right = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (target &gt; nums[right]) <span class="keyword">return</span> right + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">var</span> index = <span class="built_in">parseInt</span>((left + right) &gt;&gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (nums[index] &lt; target) left = index + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> right = index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> left;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="JS移位运算符"><a href="#JS移位运算符" class="headerlink" title="JS移位运算符"></a>JS移位运算符</h3><p>移位运算就是对二进制进行有规律低移位</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>[object Object]</title>
      <link href="/2019/06/30/eventLoop/eventLoop/"/>
      <url>/2019/06/30/eventLoop/eventLoop/</url>
      
        <content type="html"><![CDATA[<h2 id="一道面试题"><a href="#一道面试题" class="headerlink" title="一道面试题"></a>一道面试题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;, 0)</span><br><span class="line"></span><br><span class="line">new Promise(function(resolve,reject) &#123;</span><br><span class="line">  resolve(2)</span><br><span class="line">  console.log(0)</span><br><span class="line">&#125;).then(console.log)</span><br><span class="line"></span><br><span class="line">console.log(3);</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="控制台打印结果"><a href="#控制台打印结果" class="headerlink" title="控制台打印结果"></a>控制台打印结果</h3><p><img src="../../images/eventLoop.png" alt=""></p><h3 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h3><ul><li>JavaScript是单线程的语言</li><li>Event Loop是javascript的执行机制</li></ul><p>js的单线程（single threaded）和异步（asynchronous）:<br>  单线程：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new Promise(function(resolve,reject) &#123;</span><br><span class="line">  console.log(0)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(3);</span><br></pre></td></tr></table></figure></p><p>  进入队列：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;, 0)</span><br><span class="line"></span><br><span class="line">.then(console.log)</span><br></pre></td></tr></table></figure></p><blockquote><p>new Promise() 是同步任务<br>.then() 是异步任务</p></blockquote><p>微任务与宏任务：<br>  微任务：macro-task<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.then(console.log)</span><br></pre></td></tr></table></figure></p><p>  宏任务：micro-task<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;, 0)</span><br></pre></td></tr></table></figure></p><h3 id="其他的微任务和宏任务："><a href="#其他的微任务和宏任务：" class="headerlink" title="其他的微任务和宏任务："></a>其他的微任务和宏任务：</h3><p>  微任务：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Promise</span><br><span class="line">- process.nextTick</span><br></pre></td></tr></table></figure></p><p>  宏任务：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- setTimeout</span><br><span class="line">- setInterval</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>表单提交规则</title>
      <link href="/2019/06/30/formSubmissionRules/formSubmissionRules/"/>
      <url>/2019/06/30/formSubmissionRules/formSubmissionRules/</url>
      
        <content type="html"><![CDATA[<h2 id="表单提交规则"><a href="#表单提交规则" class="headerlink" title="表单提交规则"></a>表单提交规则</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">"formInline"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"handleClick"</span>&gt;</span>Button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"审批人"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formInline.user"</span> <span class="attr">placeholder</span>=<span class="string">"审批人"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleClick() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">123</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>input 输入框内按下enter键，会触发button方法<br> <img src="../../images/formSubmissionRules.png" alt="image"></p><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p>button 标签添加 type=”button”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;handleClick&quot; type=&quot;button&quot;&gt;Button&lt;/button&gt;</span><br></pre></td></tr></table></figure></p><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>This is because of the following form submission rules in the HTML specification:<br>If a form has only one input field then hitting enter in this field triggers form submit<br>if a form has 2+ input fields and no buttons or input[type=submit] then hitting enter doesn’t trigger submit<br>if a form has one or more input fields and one or more buttons or input[type=submit] then hitting enter in any of the input fields will trigger the click handler on the first button or input[type=submit] and a submit handler on the enclosing form</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>函数防抖与函数节流</title>
      <link href="/2018/10/18/Debounce-And-Throttle/Debounce-And-Throttle/"/>
      <url>/2018/10/18/Debounce-And-Throttle/Debounce-And-Throttle/</url>
      
        <content type="html"><![CDATA[<h3 id="函数防抖-debounce"><a href="#函数防抖-debounce" class="headerlink" title="函数防抖  debounce"></a>函数防抖  debounce</h3><p>场景：淘宝首页，侧边栏快速划过不显示内容，即从 【女装】快速无间隙滑动到【鲜花】，两模块中间的内容不显示。停到某一个侧边栏才显示侧边栏内容。</p><a id="more"></a><p><img src="../../images/taobao.png" alt=""></p><p>以 页面元素滚动监听 为例：</p><p>html 部分<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"head"</span>&gt;</span>顶部导航栏<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>css 部分<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10000px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#aecabd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.head</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#aacdef</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>js 部分<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector(<span class="string">'.box'</span>);</span><br><span class="line"><span class="keyword">var</span> head = <span class="built_in">document</span>.querySelector(<span class="string">'.head'</span>);</span><br><span class="line"><span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  flag = <span class="literal">false</span>;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.scrollY &gt;= <span class="number">200</span>) &#123;</span><br><span class="line">      head.style.display = <span class="string">'block'</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      head.style.display = <span class="string">'none'</span></span><br><span class="line">    &#125;</span><br><span class="line">    flag = <span class="literal">true</span>;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>分析：</p><blockquote><ol><li><p>flag = true,  不会进 if</p></li><li><p>flag = false,  进 if 直接 return</p><ul><li><p>进入 false return</p></li><li><p>进入 false return</p><ul><li><p>进入 false return</p></li><li><p>…… 循环，直到不再出发页面滚动事件（即 鼠标 或 键盘 不在动）</p></li></ul></li></ul></li><li><p>停止滚动 定时器开始计时 1000ms 以后 flag = true</p></li><li><p>flag = true, 循环 1， 2， 3</p></li></ol></blockquote><h3 id="函数节流-开关-throttle"><a href="#函数节流-开关-throttle" class="headerlink" title="函数节流 (开关)  throttle"></a>函数节流 (开关)  throttle</h3><p>html 和 css 部分 同 函数防抖</p><p>js 部分<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector(<span class="string">'.box'</span>);</span><br><span class="line"><span class="keyword">var</span> head = <span class="built_in">document</span>.querySelector(<span class="string">'.head'</span>);</span><br><span class="line"><span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">    flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  flag = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.scrollY &gt;= <span class="number">200</span>) &#123;</span><br><span class="line">    head.style.display = <span class="string">'block'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    head.style.display = <span class="string">'none'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>分析：</p><blockquote><ol><li>第一次：<ul><li>flag = true,  不会进 if</li><li>flag = false,  执行后续代码</li></ul></li><li>第二次：<ul><li>flag = false,  进 if</li><li>flag = true,  return 不执行后续代码</li></ul></li><li>第三次：<ul><li>同第一次</li></ul></li></ol></blockquote>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
